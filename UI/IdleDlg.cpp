// IdleDlg.cpp: implementation of the CIdleDlg class.
//
//////////////////////////////////////////////////////////////////////

#include "IdleDlg.h"
#include "MessageBox.h"

unsigned char CIdleDlg::ms_pLogo[] = {
0x08,
0x00,0x3f, 
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xc0,0x60,0x30,0xb0,
   0x18,0x18,0xcc,0x2c,0x2c,0x2e,0x26,0x02,0xfb,0x4b,0x4b,0x4b,0x03,0x03,0x03,0x03,
   0x9b,0x2b,0x2b,0xcb,0x03,0x03,0xf3,0x93,0xd6,0x76,0x0c,0x8c,0xcc,0x58,0xb8,0x30,
   0x70,0x60,0xc0,0xc0,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x3f, 
   0x00,0x00,0x00,0x00,0xc0,0xe0,0x70,0x18,0x0c,0x66,0xa3,0x41,0xcc,0x58,0xb8,0x6d,
   0x07,0x0e,0x89,0xc2,0x46,0x66,0x32,0x30,0x11,0x11,0x09,0x89,0xc8,0xe8,0xf8,0xf8,
   0xf8,0xe9,0xc9,0x88,0x08,0x13,0x13,0x10,0x20,0x20,0x47,0x8c,0x88,0x08,0x65,0x33,
   0x98,0xec,0x24,0x2d,0x3b,0x07,0x0e,0x1c,0x30,0xe0,0xc0,0x00,0x00,0x00,0x00,
0x00,0x3f, 
   0x00,0xe0,0x7c,0x9f,0x83,0x98,0x94,0xb2,0x2c,0x44,0x3d,0x03,0xc4,0xe0,0x78,0x4c,
   0x46,0x63,0x61,0x60,0x70,0x70,0x78,0x78,0x7c,0x7e,0x7f,0x7f,0x7f,0x7f,0x7f,0x7f,
   0x7f,0x7f,0x7f,0x7f,0x7f,0x7e,0x7c,0x78,0x78,0x70,0x70,0x60,0x61,0x61,0x46,0x4c,
   0x71,0xe0,0xc0,0x00,0x08,0x6c,0x3e,0x9b,0x89,0x8c,0x83,0x1f,0x7c,0xe0,0x00,
0x00,0x3f, 
   0xff,0xff,0x00,0xe8,0x08,0xef,0x08,0x08,0xe9,0x00,0xf0,0xfe,0x07,0x0f,0xf8,0x00,
   0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0xc0,0x3e,0x03,0xf9,
   0x03,0x3e,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x80,
   0xf8,0x1f,0x0f,0xfe,0xf0,0x00,0xe7,0x6d,0x28,0x28,0x28,0x20,0x00,0xff,0xff,
0x00,0x3f, 
   0xff,0xff,0x00,0x01,0x45,0x65,0x55,0x4d,0x45,0x80,0x87,0x3f,0xf0,0x80,0x01,0x03,
   0x0e,0x3e,0xfe,0xfe,0xde,0x1f,0xb1,0x33,0x66,0x4e,0x9e,0x3e,0x7e,0x7f,0x60,0x07,
   0x60,0x7f,0x7e,0x3e,0x9e,0x9e,0x4e,0x26,0x33,0x33,0x9f,0xfe,0xfe,0x3e,0x0e,0x03,
   0x00,0x80,0xf0,0x3f,0x87,0x80,0x9d,0xb6,0xa2,0x22,0x22,0x14,0x00,0xff,0xff,
0x00,0x3f, 
   0x00,0x03,0x1f,0x38,0xe0,0x86,0x0c,0xc8,0x8e,0x24,0x67,0xc0,0xc1,0x63,0x4e,0x18,
   0x30,0x60,0xc0,0x81,0x07,0x0e,0x1c,0x31,0x72,0xe2,0xe4,0xe1,0xe3,0xee,0xee,0x00,
   0xee,0xee,0xe3,0xe1,0xe5,0xe0,0x72,0x31,0x1c,0x0c,0x07,0x81,0xc0,0x60,0x30,0x18,
   0x8e,0xc3,0x60,0x30,0x63,0xc4,0x84,0x07,0x09,0x0d,0xc7,0xf0,0x1f,0x03,0x03,
0x00,0x3f, 
   0x00,0x00,0x00,0x00,0x01,0x03,0x06,0x0c,0x19,0x33,0x63,0xc1,0x80,0x00,0x00,0x1c,
   0x38,0x1c,0x10,0x01,0x01,0x03,0x06,0x06,0xc4,0x0c,0x09,0x8b,0x4f,0x4f,0x8f,0x08,
   0x8f,0x4f,0x8f,0x0f,0x4d,0x4c,0xc4,0x06,0x06,0x03,0x01,0x01,0x10,0x1c,0x38,0x1c,
   0x00,0x81,0x83,0xc6,0x60,0x34,0x1a,0x0c,0x06,0x03,0x03,0x00,0x00,0x00,0x00,
0x00,0x3f, 
   0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x03,0x02,0x06,
   0x04,0x0c,0x18,0x18,0x10,0x30,0x20,0x20,0x6f,0x60,0x60,0x69,0x6a,0x6a,0x6f,0x60,
   0x67,0x68,0x67,0x60,0x60,0x6e,0x61,0x20,0x30,0x30,0x30,0x18,0x18,0x0c,0x04,0x06,
   0x03,0x03,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00 
};



//--------------------------------------------------------------------------------------------------

CIdleDlg::CIdleDlg()
{
	memset(this->m_idleMessage_1, 0x00, sizeof(this->m_idleMessage_1));
	memset(this->m_idleMessage_2, 0x00, sizeof(this->m_idleMessage_2));
}

//--------------------------------------------------------------------------------------------------

CIdleDlg::~CIdleDlg()
{

}

//--------------------------------------------------------------------------------------------------

int CIdleDlg::Draw()
{
	CScreen::Draw();
	uchar key;
	TimerSet(0, 20);
	int swc = 1;
	char* pMsg = this->m_idleMessage_1;

	TimerSet(TIMER_AUTO_ADVICE, 400);

	ScrFontSet(1);
	ScrGotoxy(3,1);
	Lcdprintf(pMsg);
	ScrFontSet(0);

	do {
		key = kbhit();
		if (key == 0x00) {
			key = getkey();
			if (key == KEY_MENU) {
				break;
			}
			if (key == KEY_ENTER) {
				islemHarcamaHandler();
				break;
			}
			else {
				CMessageBox box("Satis icin\nGIRIS\ntusuna basiniz.", MB_ANY_KEY);
				box.Draw();
				
				ScrCls();
			}
		}
		else {
			if (!TimerCheck(0)) {
				ScrCls();
				if (swc == 0) {
					pMsg = this->m_idleMessage_1;
					swc = 1;
					ScrFontSet(1);
					ScrGotoxy(3,1);
					Lcdprintf(pMsg);
					ScrFontSet(0);
				}
				else {
					this->DrawLogo(CIdleDlg::ms_pLogo);
					//pMsg = this->m_idleMessage_2;
					swc = 0;
				}
				TimerSet(0, 20);
			}
			else if (!TimerCheck(TIMER_AUTO_ADVICE)) {
				TimerSet(TIMER_AUTO_ADVICE, 400);
				islemTestHandler();
				TimerSet(0, 20);
			}
		}
	} while(true);


	return SUCCESS;
}

//--------------------------------------------------------------------------------------------------

void CIdleDlg::SetMessage1(const char* pMsg)
{
	strncpy(this->m_idleMessage_1, pMsg, strlen(pMsg));
}

//--------------------------------------------------------------------------------------------------

void CIdleDlg::SetMessage2(const char* pMsg)
{
	strncpy(this->m_idleMessage_2, pMsg, strlen(pMsg));
}

//--------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------
//--------------------------------------------------------------------------------------------------
